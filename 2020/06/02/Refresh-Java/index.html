
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Weyoung&#39;s Blog">
    <title>Refresh Java - Weyoung&#39;s Blog</title>
    <meta name="author" content="Prince Chen">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="Thinking in Java">
<meta name="keywords" content="Java">
<meta property="og:type" content="blog">
<meta property="og:title" content="Refresh Java">
<meta property="og:url" content="http://talentprince.github.io/2020/06/02/Refresh-Java/index.html">
<meta property="og:site_name" content="Weyoung&#39;s Blog">
<meta property="og:description" content="Thinking in Java">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2020-06-23T00:24:21.407Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Refresh Java">
<meta name="twitter:description" content="Thinking in Java">
    
    
        
    
    
    
        <meta property="og:image" content="https://res.cloudinary.com/dtn0pkdmg/image/upload/v1592819744/java_cwuv0h.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://res.cloudinary.com/dtn0pkdmg/image/upload/v1592819744/java_cwuv0h.png" />
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-o74idg7azsb0cijbmsphaworuuzllhz4futxxaz3kcnb0gtidec5dfgqw6zp.min.css">
    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Weyoung&#39;s Blog</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            Refresh Java
        </h1>
    
    
        <div class="post-meta">
    <time itemprop="datePublished" datetime="2020-06-02T17:54:52+08:00">
	
		    6月 02, 2020
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

    
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p>当你的知识来源于实践, 你可能会忽略很多细节.<br>当你的知识来源于阅读, 你可能会很快的忘掉.</p>
<p>那么, 不如在空闲之余, 浏览一遍, 把觉得有必要的记录下来, 也便于以后温故而知新, 何乐而不为呢?<br>于是便有了这138条从Thinking In Java中记下来的条目.<br>这本书不同于其他的Java教材, 它的作者更喜欢通过与C++进行对比来阐述Java的不同思想, 如果读者有一定C++知识储备, 会更好的理解Java的很多设计.</p>
<a id="more"></a>
<ul>
<li><code>&gt;&gt;&gt;</code>无符号移位</li>
<li><code>for(1 : range(10))</code>可实现计数器循环foreach</li>
<li><code>printnb</code>不会换行放在缓冲区, <code>print()</code>将其输出</li>
<li>带标签的<code>break</code>与<code>continue</code>可以跳出嵌套循环</li>
<li>构造调用<code>this(xxx)</code>只能调用一次,并且在最开始</li>
<li>Java的<code>finalize</code>是在垃圾回收时候调用的, 一般是配合释放ndk相关的底层空间</li>
<li>静态对象只有在所属类被实创建时才会被加载</li>
<li>构造方法其实也是静态方法</li>
<li><code>int[] a</code>与<code>int a[]</code>都可以,  前一种更合理, 后一种像C++</li>
<li>数组初始化花括号最后一个逗号可选, 即<code>{x,y,z,}</code></li>
<li>没有写<code>package</code>的类默认属于目录所在包</li>
<li>即时类不是<code>public</code>, 但是<code>main</code>方法依旧可以被调用</li>
<li>子类调用父类方法, 父类再调用<code>public</code>方法则可能会调用到子类所继承的方法(如果覆盖的话), 如果该方法在父类是<code>private</code>, 则只会调用父类方法, 因为不能覆盖, C++如果不是虚函数, 则只会调用父类的, 因为<code>this</code>内函数地址编译时就确定了</li>
<li><code>Java</code>函数没有隐藏/屏蔽特性, <code>C++</code>子类会同名函数会隐藏/屏蔽掉父类所有同名重载函数, 因为它会先查找函数名, 再找具体类型.</li>
<li>早起<code>JVM</code>会根据<code>final</code>类型来内联函数, 现在已经有更先进的技术了, 只为了禁止覆盖.</li>
<li>覆盖<code>private final</code>其实是假象而已</li>
<li>面向对象特性, 抽象, 继承, 多态</li>
<li><code>Java</code>除了<code>static</code>与<code>final</code>外函数都是后期绑定的, 即动态绑定</li>
<li><code>Java</code>构建子类时父类构造函数调用已被覆盖的函数会触发动态绑定, 但此时子类未完成构造, 所以类内对象都为空值. <code>C++</code>在处理同样问题时更加合理, 由于虚表指针未完整建立, 所以不会触发动态绑定, 无论是构造还是析构函数, 都是直接调用而非虚调用, 为了避免问题, 尽量不要在构造函数内调用可被覆盖的函数, 可以调用<code>final</code>函数来防止出错</li>
<li>Java5加入被覆盖方法返回参数协变(向下转型)</li>
<li>interface中定义的所有常量都是自动static fianl的</li>
<li>类内部定义的private接口可以进行内部public的实现, 但在外部无法看出任何有关私有接口的类型信息, 即不可向上转型</li>
<li>嵌套在接口内的接口自动public</li>
<li>private接口不能在定义它的类之外被实现</li>
<li>内部类持有的外部类对象学术名叫Enclosing Object(外围对象)</li>
<li>创建非静态内部类必须通过<code>.new</code>来创建, 即使用外部对象来创建内部对象</li>
<li>private内部类可以帮助隐藏具体实现, 外部类可以提供其实例的向上转型</li>
<li>内部类还可以放在方法里缩小scope, 作用于与局部变量一样</li>
<li>匿名内部类没有命名构造器, 只有实例初始化传参, 或者通过final形参直接在内部使用</li>
<li>static内部类叫作嵌套类, 它不持有外围对象</li>
<li>接口内部可以放嵌套类, 可以这么搞个测试在里面</li>
<li>内部类更重要的作用是有效的实现了<code>多重继承</code>, 比如需要继承多个抽象类而不是接口</li>
<li>Java使用内部类实例做回调来实现闭包功能</li>
<li>Java通过接口+内部类可以结果C++多重继承所能解决的问题</li>
<li>List/Set/Queue都继承Collection, Map独立有接口, 两者唯一的关系是Map提供一个返回Collection的entrySet与values</li>
<li>Queue虽然继承于Collection, 但Queue有自己独立的接口, 创建Queue不需要Collection的方法</li>
<li>LinkedList也继承于Dequeue</li>
<li>当我们在异常处理的终止与恢复中选择时, 开始往往是恢复, 最后趋向终止</li>
<li>对自定义异常的扩展可能没太大用, 因为更多的时候只关注异常类型</li>
<li>重新抛异常会保留之前的信息, 不会新加入抛出点的信息, 除非调用fillInStackTrace()</li>
<li>重新抛出新的异常则会清楚之前的信息</li>
<li>Finally用来清理，C++靠的是析构函数</li>
<li>即便有break，continue，return，finally始终都会被执行</li>
<li>Finally中return会吃掉try内的异常</li>
<li>Finally中抛异常会吃掉try内的异常</li>
<li>基类构造抛出异常不用在子类限制必须抛出， 因为基类构造必须调用， 并且需要处理</li>
<li>子类方法不能抛出基类未声明过的异常，这样直接调用基类接口不用处理，实际运行可能会出错</li>
<li>子类方法可以抛出基类声明异常的子类异常</li>
<li>对于构造需要清理的对象，如文件，应该将构造失败单独try/catch，而close方法放在内部的try/catch只对创建成功后进行清理</li>
<li>字符串正则表达式查找find匹配任意位置，lookingAt只从开头匹配， matches匹配全部</li>
<li>正则Pattern可以用<code>|</code>与操作进行组合</li>
<li>Java默认类型转换会RTTI，但是C++不会</li>
<li>setAccessable只是控制是否安全检测，public默认仍是false，关闭后速度快</li>
<li>泛型会被擦除， ArrayList<integer>跟ArrayList<string>一样，通过getTypeParameters()也只能得到占位符</string></integer></li>
<li>C++泛型不会擦除， 所以编译的时候仍然可以获得具体使用类型，所以定义时泛型对象就可以调用实际类型的方法，Java得通过泛型extends来实现</li>
<li>擦除主要是为了兼容低版本</li>
<li>C++可以直接new T()而Java只能通过泛型当参数newInstance，对于没有默认构造的Java可以传入泛型工场进行构造</li>
<li>泛型可以通过extends来限制边界, 并且可以通过<code>&amp;</code>增加多个边界, 类应该放在接口的前面</li>
<li><code>Clazz&lt;Apple&gt;</code>只能向上转型为<code>Clazz&lt;? extends Fruit&gt;</code>, 而不能<code>Clazz&lt;Fruit&gt;</code>, <code>Clazz&lt;Food&gt;</code>可以向下转型为<code>Clazz&lt;? super Fruit&gt;</code></li>
<li><code>&lt;? extends X&gt;</code>指定上界, 无法进行add操作, 因为它是由子类List向上转型来的, 子类多种多样不确定, 所以不让你放, 而get返回<code>X</code>, <code>&lt;? super X&gt;</code>指定下届, 是由父类List向下转型来的, 可以add <code>X</code>的子类, 内部可安全强转为同一个父类(X的某个父类), 但get就不清楚是哪个父类, 所以只能拿到<code>Object</code></li>
<li>类不能实现泛型接口的两种变体</li>
<li>自限定泛型继承, <code>class SelfBounded&lt;T extends SelfBounded&lt;T&gt;&gt;</code>, 任何继承SelfBounded类的泛型类型必须也是SelfBounded的导出类</li>
<li>继承自限定类可保证接口函数导入类唯一, 参数为限定类泛型指定</li>
<li>C++可以通过<code>template&lt;class T&gt; : T</code>来进行混型, 有一些AOP方面的思想</li>
<li>Java可以通过继承多个接口, 并分别初始化的时候进行实现, 然后再代理进行混型</li>
<li>Java也可以通过装饰器进行混型的概念, 但是由于装饰器其实只有最后一层是暴露的, 失去了内部各层的特性, 而混型是基于继承, 保留所有特性</li>
<li>Java还可以通过动态代理, 将所有需要混型的实现与接口导入, 在invoke的时候查表得到对应的Delegate来调用方法, 实现混型, 但是不方便, 也不易懂, 不如C++静态的好</li>
<li>对于一些脚本语言, 类型检测是在运行期, 所以可以使用潜在类型机制, 进行代码复用, 如Python, 只需要方法名一样, 或者称为鸭子类型机制, 只要走起来像鸭子, 叫起来像鸭子, 就当做鸭子…</li>
<li>由于C++的泛型在编译器可以检测T支持的方法, 可以直接对泛型类型调用相应函数,  也可以做到类似Python的效果. 表面上看C++的泛型成了弱类型, 但实际上是安全的, 称之为具有通气门的强类型</li>
<li>Java的泛型出现的晚, 已经不具备这种潜在类型机制了, 可以认为比他们更缺乏泛化性</li>
<li>Java虽然不能潜在类型, 但可以通过泛型, 一定程度补偿了这样的灵活性</li>
<li>虽然Java的Map有泛型, 但是<code>containsKey</code>, <code>get</code>之类的方法不受泛型约束, 而C++的Map是会在编译器检查类型的. 主要原因是泛型对于Java是后来引入的, 而对于C++在最初的标准版本里就引入了</li>
<li><code>Arrays.deepToString()</code>可以给数组填充初始默认值</li>
<li><code>Arrays.fill()</code>可以给数组填充指定值</li>
<li>无法创建泛型数组, 但是类型可以被赋值</li>
<li><code>Array.newInstance</code>用反射的Array可以生成任意类型, 指定大小的数组</li>
<li><code>System.arraycopy</code>可以实现高效的数组内存拷贝</li>
<li>自己实现Collection不一定需要支持所有的操作, 虽然平时用的List, Map, Set都实现了</li>
<li><code>Arrays.asList()</code>生成的是固定大小数组, 不支持改变大小的操作, 使用会抛异常</li>
<li><code>LinkedList</code>实现了<code>Queue</code>接口, 但是Java没有<code>Dequeue</code>接口, 不过它已经实现了所需方法<code>getLast</code>, 所以可以自己包装 </li>
<li><code>TreeMap</code>是唯一带<code>subMap</code>的Map, 返回一个子树, 它是<code>SortedMap</code>的唯一实现</li>
<li><code>LinkedHashMap</code>的散列是一个LRU, 没有被使用的数据放在前面</li>
<li>通过<code>Collection.synchronized</code>可以创建不同的线程同步子类</li>
<li><code>SoftReference</code>跟<code>WeakReference</code>都可以单独使用, 而<code>PhantomReference</code>必须跟<code>ReferenceQueue</code>一起使用</li>
<li>普通对象被gc后会进入<code>Finalizable</code>状态, finalize未被调用,  仍就可以有机会复生 (复写finalize), 当finalize调用后,  会进入<code>Finalized</code>状态, 下次GC会被回收</li>
<li><code>PhantomReference</code>天生就是finalized状态, GC发生后就清掉了</li>
<li><code>Stack</code>,<code>Vector</code>都是1.0/1.1版本的东西, 为了兼容性而保留了</li>
<li>1.4之后引入了<code>nio</code>相较于之前的被称之为新IO</li>
<li>1.1加入的Reader跟Writer是为了国际化兼容16位Unicode字符</li>
<li><code>BufferedInputFile.read</code>可以读取文件到Reader里, 在进行其他的包装, 如<code>StringReader</code>, <code>BufferedReader</code>, 没有快捷方式.</li>
<li>写入文本可以使用<code>PrinterWriter</code>简化, 直接<code>writer.println</code></li>
<li><code>System.out/in/err</code>被称为标准IO, 通过<code>setOut/In/Err</code>可以进行重定向</li>
<li><code>javap</code>随jdk一起发布做反编译</li>
<li>旧IO底层已经用nio重构过了</li>
<li>旧的<code>FileInputStream</code>, <code>FileOutputStream</code>等被修改支持生成一个<code>Channel</code>, Writer跟Reader不支持, 但是Channel有方法可以生成他们</li>
<li>Channel通过<code>ByteBuffer</code>进行读写, 写之前需要<code>flip</code>准备缓冲区, 读之前需要<code>rewind</code>回到数据头,  再通过<code>asCharBuffer</code>转换后打印</li>
<li><code>ByteBuffer.flip</code>是将position设置为0, 将limit设置为当前位置, 准备写;  <code>ByteBuffer.rewind</code>是将position设置为0, 并将marker清除, 准备读; <code>mark</code>会设置mark, <code>reset</code>会把position指向mark</li>
<li>通过ByteBuffer的<code>asCharBuffer</code>或者别的方法, 可以获得所谓缓冲器视图, 对缓冲器进行对应类型的<code>put</code>, 该缓冲器可通过其他as方法切换至其他的窗口进行输出</li>
<li>如果直接向缓冲器内写入Bytes, 那么无法通过<code>asCharBuffer</code>读出, 必须写入<code>UTF-16BE</code>才对应格式, 按Char读出不会乱码</li>
<li>通过<code>RandomAccesFile.map</code>可以产生<code>MappedByteBuffer</code>进行内存磁盘映射, 必须指定一个映射范围, 它的效率要比建立在nio之上的旧IO要快</li>
<li>Object序列化的文件, 必须能在找到类定义的环境下才能被反序列化成功, 否则会ClassNotFoundException</li>
<li>通过Serializable序列化, 内部有大量反射, 直接将二进制赋值,  不需要通过构造. 如果复写read/writeObject, 或者实现<code>Externalizable</code>接口, 自己实现序列化, 则需要有public默认构造, 没有反射, 效率高</li>
<li>静态成员变量不能自己序列化</li>
<li>枚举在编译的时候编译器会给加入<code>values</code>跟单参的<code>valueOf</code>静态方法</li>
<li>所以枚举向上转型Enum就没有values方法了, 但可以通过Class中<code>getEnumConstant</code>方法反射</li>
<li>构建枚举的枚举可以通过将枚举Class当构造参数传入枚举对象, 并且通过<code>geEnumConstant</code>覆盖其values</li>
<li><code>EnumSet.allOf</code>可以传入一个枚举类class, <code>of</code>则是手动传入N个枚举类型</li>
<li>枚举可以添加自定义方法, 每一个实例独自实现,  但是枚举实例不能像普通类一样作函数参数, 因为每一个实例其实是enum类型本身</li>
<li>注解不能继承, 注解的字段要么定义默认值, 要么使用时传入, 不能为空</li>
<li>线程设置为Deamon模式, 主线程结束后就被杀掉了</li>
<li>Thread可以设置<code>setDefaultUncaughtExceptionHandler</code>, 不设置就会被default处理</li>
<li>测试资源竞争可以调用<code>Thread.yield</code>增加几率</li>
<li>Java也提供手动的<code>Lock</code>, return要写在try里确保在finally的unlock之前调用</li>
<li>如果想实现尝试获取, 不行放弃的话, 需要自己封装<code>ReentrantLock</code>, 使用<code>tryLock</code></li>
<li>多核处理器上可视性比原子性问题多得多, volatile会解决可视性问题</li>
<li>volatile如果已经被synchronized防护, 则不需要加; 如果只在一个任务中用, 也不用加; 如果依赖前值, 或者某个域的值, 那也无法工作</li>
<li>在C++中自加可能是原子性的, 但是Java中肯定不是</li>
<li><code>synchronized</code>最合理的是锁被调用对象this, 或者加方法上, 这样如果一个线程获得了锁, 其他synchronized的方法也都不能被别的线程调用了</li>
<li>IO与Synchronized的阻塞无法被打断, 关闭资源才可以释放锁, 并打断线程, 锁阻塞续采用<code>Lock.lockInterruptibly</code>才可以被打断</li>
<li>线程被中断一般需要有清理逻辑, 通过try/catch/fanilly来做</li>
<li><code>sleep()</code>, <code>yield()</code>不会释放锁, <code>wait()</code>期间对象锁会释放, 被notify后, 醒之前必须重新获得锁</li>
<li><code>wait</code>一般跟while循环配合, 因为在即将被唤起之前(调用notify的前后), 可能条件已经发生了改变</li>
<li>为了防止错过信号, 通常也需要通过while(cindition)来保护wait, 防止死锁</li>
<li>因为wait会释放锁, 而notify在synchronized区间内, 会在之前获取锁, 而wait被唤醒又会重新获取锁,  所以实际上使用notifyAll也只能唤起在等待的一个任务, 同样, 使用notify的时候, 应使等待条件一致, 如果条件不一致, 则只能使用notifyAll</li>
<li>可以synchronized锁Object以及wait/notify做同步, 也可以通过<code>ReentrantLock</code>生成condition, 通过await/signal/lock/unlock来操控</li>
<li>有时候使用一些同步对象也可以简化逻辑, 如<code>BlockingQueue</code></li>
<li>简单的线程同步也ke已用1.5引入的<code>CountDownLatch</code>做</li>
<li>相较于CountDown只能计数一边, <code>CyclicBarrier</code>可以重复利用, 第一个参数传入parties个数, 当await数量达到时会停止等待, 并且调用第二个参数Runnable执行, 可以再次触发await, 这样可以形成一个循环, 或者闭环</li>
<li>除了<code>BlockingQueue</code>之外, 还有其他类似的同步队列, 但需要实现一定的接口, 如<code>DelayBlockingQueue</code>, <code>PriorityBlockingQueue</code></li>
<li><code>SynchronousQueue</code>的put必须等待take</li>
<li>常用的Excutor有<code>CachedThreadPool</code>, <code>ScheduledThreadPool</code>, <code>FixedThreadPool</code>等</li>
<li><code>Semaphore</code>作为信号量, 可以设置次数, 多次acquire, 并通过release来释放信号, 区别于<code>ReentrantLock</code></li>
<li><code>Exchanger</code>可以作为一个类似管道的东西, 同时传递生产到消费</li>
<li>一般使用synchronized, 可读性强, 调优用Lock, 简单情况用Atomic, 有性能指标可以替换</li>
<li><code>CopyOnWriteArrayList</code>内部使用整个数组的副本进行操作, 最终原子替换, 性能高一些, <code>ConcurrentHashMap</code>与<code>ConcurrentLinkededQueue</code>类似, 只不过是部分复制再操作. 这两者读取过程都有乐观锁处理, 所以性能要比synchronized List/Map好, 尤其是在很少写入的情况</li>
<li>AtomicXXX有一些乐观加锁的函数, 如compareAndSet, 当提供的oldValue发生变化时, set失败</li>
<li>读写锁(ReentrantReadWriteLock)保证了读取数据的一致性, 当写锁被持有的时候, 读锁将不能获取, 其他时候可多次获取读锁</li>
<li>更多的时候多线程的问题要通过Task+消息队列, 但这个依赖于平台或者额外复杂的设计</li>
</ul>

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Java/">Java</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/09/30/Refresh-design-pattern/" data-tooltip="Refresh design pattern">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://talentprince.github.io/2020/06/02/Refresh-Java/">
                    <i class="fa fa-facebook-official"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://talentprince.github.io/2020/06/02/Refresh-Java/">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://talentprince.github.io/2020/06/02/Refresh-Java/">
                    <i class="fa fa-google-plus"></i>
                </a>
            </li>
        
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Prince Chen. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/09/30/Refresh-design-pattern/" data-tooltip="Refresh design pattern">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://talentprince.github.io/2020/06/02/Refresh-Java/">
                    <i class="fa fa-facebook-official"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://talentprince.github.io/2020/06/02/Refresh-Java/">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://talentprince.github.io/2020/06/02/Refresh-Java/">
                    <i class="fa fa-google-plus"></i>
                </a>
            </li>
        
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <i id="btn-close-shareoptions" class="fa fa-close"></i>
    <ul class="share-options">
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://talentprince.github.io/2020/06/02/Refresh-Java/">
                    <i class="fa fa-facebook-official"></i><span>分享到 Facebook</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://talentprince.github.io/2020/06/02/Refresh-Java/">
                    <i class="fa fa-twitter"></i><span>分享到 Twitter</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://talentprince.github.io/2020/06/02/Refresh-Java/">
                    <i class="fa fa-google-plus"></i><span>分享到 Google+</span>
                </a>
            </li>
        
    </ul>
</div>

            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <h4 id="about-card-name">Prince Chen</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">没有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://talentprince.github.io/2014/12/15/2014-12-15-first-blog/">
                            <h3 class="media-heading">First Blog</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2014年12月15日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://talentprince.github.io/2014/12/15/2014-12-15-robolectric-in-android-studio/">
                            <h3 class="media-heading">Robolectric in Android Studio</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2014年12月15日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><h2 id="Robolectric"><a href="#Robolectric" class="headerlink" title="Robolectric"></a>Robolectric</h2><p>Robolectric is a unit test framework that de-fangs the Android SDK jar so you can test-drive the development of your Android app. Tests run inside the JVM on your workstation in seconds. With Robolectric you can write tests like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Test class for MyActivity @RunWith(RobolectricTestRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivityTest</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="meta">@Test</span>   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clickingButton_shouldChangeResultsViewText</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  Activity activity = Robolectric.buildActivity(MyActivity.class).create().get();</span><br><span class="line">    Button pressMeButton = (Button) activity.findViewById(R.id.press_me_button);</span><br><span class="line">    TextView results = (TextView) activity.findViewById(R.id.results_text_view);</span><br><span class="line"></span><br><span class="line">    pressMeButton.performClick();</span><br><span class="line">    String resultsText = results.getText().toString();</span><br><span class="line">    assertThat(resultsText, equalTo(<span class="string">"Testing Android Rocks!"</span>));   &#125; &#125;</span><br></pre></td></tr></table></figure>
<p>Robolectric makes this possible by rewriting Android SDK classes as they’re being loaded and making it possible for them to run on a regular JVM. </p>
<hr></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://talentprince.github.io/2014/12/18/2014-12-18-activity-chang-yong-shu-xing-yu-launch-mode-zheng-jie/">
                            <h3 class="media-heading">Activity LaunchMode 与 Intent Flags 揭秘</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2014年12月18日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Android Activity所涉及的四种Launch Mode与其重要的几个属性，如taskAffinity，allowTaskReparenting等，包括Intent内的各种Flag的功效，一直是为广大开发者所苦恼，网上文章众说纷纭，开发文档又及其模糊且与实际情况有一定偏差，那么今天我们就来真正的揭秘，还原事实的真相。<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://talentprince.github.io/2014/12/23/2014-12-23-joda-time-zhong-ying-ge-shi-hua-xiang-guan-wen-ti/">
                            <h3 class="media-heading">Joda Time 中英格式化相关问题 for Java</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2014年12月23日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><h1 id="Joda-Time"><a href="#Joda-Time" class="headerlink" title="Joda Time"></a>Joda Time</h1><p>Joda-Time提供了一组Java类包用于处理包括ISO8601标准在内的date和time。可以利用它把JDK Date和Calendar类完全替换掉，而且仍然能够提供很好的集成。  </p>
<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><p>Joda已经更新到2.6版本,jar包的下载可以到<a href="https://github.com/JodaOrg/joda-time/releases/tag/v2.6" target="_blank" rel="noopener">Joda Jar</a>进行下载.<br>如果使用gradle管理,可添加 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile &apos;joda-time:joda-time:2.6&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://talentprince.github.io/2015/01/04/2015-01-04-android-yu-inject-yi-lai-zhu-ru-de-bu-jie-zhi-yuan/">
                            <h3 class="media-heading">Android 与Inject(依赖注入)的不解之缘</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年1月4日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p> 依赖注入(DI)<br> 有些人说Android使用依赖注入是因为很多J2EE的人带来的异域思想, 满天飞的<code>注解</code>让人莫不找头脑, 使简单的行为变得复杂, 表面简化, 实则复杂.</p>
<p> 但是在使用其一段时间后, 确实还是挺不错的. 正如其思想之精髓, 让你只关注<strong>结果</strong>,而忽略<strong>制作过程</strong>, 呵呵, 跟<code>周星驰</code>他老母恰巧相反.  </p>
<p> 那么下面就讲讲Android开发中常常的用的一些DI框架, 来简化亲们的开发流程吧.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://talentprince.github.io/2015/01/07/2015-01-07-android-activity-quan-ping-fang-fa-zong-jie/">
                            <h3 class="media-heading">Android Activity 全屏方法总结</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年1月7日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Android版本繁多, 新API, 新Flag层出不穷, 针对于如何完美全屏, 下面做以总结.</p>
<p>所有方法只涉及<strong>代码</strong>操作, 非xml修改Activity属性所致</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://talentprince.github.io/2015/01/26/2015-01-26-android-zhang-hao-yu-tong-bu-xi-tong-part-one/">
                            <h3 class="media-heading">Android 构建账号与同步服务 Part One</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年1月26日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><h4 id="账号与同步"><a href="#账号与同步" class="headerlink" title="账号与同步"></a>账号与同步</h4><p>Android从<code>API Level5</code>就有了自己的同步服务, 但很少有程序使用到, 一来大多数程序不需要所谓的同步,二来很多程序自己实现了后台的同步更新. 随着Android程序开发的逐渐程序, 越来越的的程序使用到了系统提供的服务来完成<code>账号认证</code>与<code>同步更新</code>, 我们可以打开系统设置–&gt;账号进行查看, 就能看到很多应用都这么做了. 这样做有两个好处, 一来系统服务做更新同步(<code>SyncAdapter</code>)唤醒更加绿色环保, 二来实现了账号认证(<code>Authenticator</code>)还可以为其他应用提供第三方认证服务, 如大家常见的使用QQ或者微博账号登录, 由于你手机上安装的QQ与微博实现了该接口, 便可以通过开发者账号获得授权Token来做第三方认证.</p>
<p>本期博客分三部分来讲, 通过一个小应用(Part Three提供源码)来概述所有相关内容, 大体章节如下</p>
<ul>
<li><p>数据模型建立与加载 (ContentProvider LoaderManager)</p>
</li>
<li><p>更新系统建立 (SyncAdapter)</p>
</li>
<li><p>账号系统建立 (Account Authenticator)</p>
</li>
</ul>
<p>下面先来讲讲如何轻松本地数据库并完成数据到界面的加载</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://talentprince.github.io/2015/02/04/2015-02-04-android-gou-jian-zhang-hao-yu-tong-bu-fu-wu-part-two/">
                            <h3 class="media-heading">Android 构建账号与同步服务 Part Two</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月4日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>紧接<a href="http://talentprince.github.io/blog/2015/01/26/android-zhang-hao-yu-tong-bu-xi-tong-part-one/">上一部分</a></p>
<h4 id="更新系统的建立"><a href="#更新系统的建立" class="headerlink" title="更新系统的建立"></a>更新系统的建立</h4><p>更新系统即是所说的<a href="http://developer.android.com/training/sync-adapters/creating-sync-adapter.html" target="_blank" rel="noopener">SyncAdapter</a>, 实现了这个系统服务, 就可以利用系统的定时器对程序数据<code>ContentProvider</code>进行更新, 也可以在系统设置-&gt;账号里面控制开启或者关闭(如果<code>SyncAdapter</code>的配置文件允许的话)</p>
<p>完成这些服务的布置大概有三步</p>
<ul>
<li>创建SyncService并提供SyncAdapter的IBinder接口以便让系统调用</li>
<li>声明Sync服务, 并制定SyncAdapter的配置文件</li>
<li>生成账户启动Sync</li>
</ul></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://talentprince.github.io/2015/02/10/2015-02-10-android-gou-jian-zhang-hao-yu-tong-bu-fu-wu-part-three/">
                            <h3 class="media-heading">Android 构建账号与同步服务 Part Three</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月10日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><h4 id="紧接上期"><a href="#紧接上期" class="headerlink" title="紧接上期"></a>紧接<a href="http://talentprince.github.io/blog/2015/02/04/android-gou-jian-zhang-hao-yu-tong-bu-fu-wu-part-two/">上期</a></h4><h4 id="账号系统建立-Account-Authenticator"><a href="#账号系统建立-Account-Authenticator" class="headerlink" title="账号系统建立 Account Authenticator"></a>账号系统建立 Account Authenticator</h4><p>如果只需要借助系统更新服务(SyncAdapter)来做定期维护, 那么通过前两部分的介绍, 已经可以达到所预期的目标了.</p>
<p>本期话题将会解决</p>
<ul>
<li>添加账号</li>
<li>获得授权</li>
</ul>
<p>这些服务全部都是可以跨进程的操作, 完成了这些操作, 我们就可以完成像<code>QQ</code> <code>新浪微博</code> 一样的功能, 账号系统可以为第三方应用授权.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://talentprince.github.io/2016/01/26/2016-01-26-qing-chu-yu-ming-bai/">
                            <h3 class="media-heading">清楚与明白</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年1月26日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>许久未更新, 已渐渐落草, 回顾过去一年, checklist总归是完成为多, pending为少, 但这并不意味着很多事情都得到了清楚的解决, 也有很多事情可能还需要时间去琢磨才能想的明白.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="没有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 41 篇文章
            </p>
        </div>
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-dkftwi4fn0akh1pk7kjgazpo1sv0j4rgqfrmobxkejbd2aq6tbmapmsp3gzq.min.js"></script>
<!--SCRIPTS END-->

    


    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('Z7A3XW4R2I', '12db1ad54372045549ef465881c17e743');
        var algoliaIndex = algoliaClient.initIndex('my-hexo-blog');
    </script>

    </body>
</html>
